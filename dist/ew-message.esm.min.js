/*!
 * ewMeassage.js v0.1.8-beta.3
 * (c) 2023-2025 eveningwater 
 * Released under the MIT License.
 */
var e;!function(e){e.success="success",e.info="info",e.warning="warning",e.error="error",e.loading="loading"}(e||(e={}));const s={success:e.success,info:e.info,warning:e.warning,error:e.error,loading:e.loading},t=Object.freeze({content:"",center:!1,type:"info",duration:2e3,showClose:!0,showTypeIcon:!0,container:document.body,removeClassName:[],startClassName:[]}),n=Object.freeze(["fadeOut","scaleUp"]),o=Object.freeze(["fadeIn","scaleDown"]),a=new Map,i=(e,s,t)=>{const n=`${e}_${s}`;return a.has(n)||a.set(n,t(s)),a.get(n)},r=e=>`<svg t="1695191725930" class="${e}message-icon ${e}message-success-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4394"><path d="M512 97.52381c228.912762 0 414.47619 185.563429 414.47619 414.47619s-185.563429 414.47619-414.47619 414.47619S97.52381 740.912762 97.52381 512 283.087238 97.52381 512 97.52381z m193.194667 218.331428L447.21981 581.315048l-103.936-107.812572-52.662858 50.761143 156.379429 162.230857 310.662095-319.683047-52.467809-50.956191z" p-id="4395" fill="#1afa29"></path></svg>`,l=e=>`<svg t="1695191794405" class="${e}message-icon ${e}message-warning-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5405"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296z m32 440c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z" p-id="5406" fill="#faad14"></path></svg>`,c=e=>`<svg t="1695191861829" class="${e}message-icon ${e}message-error-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6407"><path d="M512 64.303538c-247.25636 0-447.696462 200.440102-447.696462 447.696462 0 247.254314 200.440102 447.696462 447.696462 447.696462s447.696462-200.440102 447.696462-447.696462S759.25636 64.303538 512 64.303538zM710.491727 665.266709c12.491499 12.491499 12.489452 32.729425-0.002047 45.220924-6.246261 6.246261-14.429641 9.370415-22.611997 9.370415s-16.363689-3.121084-22.60995-9.366322L512 557.222971 358.730221 710.491727c-6.246261 6.246261-14.429641 9.366322-22.611997 9.366322s-16.365736-3.125177-22.611997-9.370415c-12.491499-12.491499-12.491499-32.729425 0-45.220924l153.268756-153.266709L313.50725 358.730221c-12.491499-12.491499-12.489452-32.729425 0.002047-45.220924s32.729425-12.495592 45.220924-0.004093l153.268756 153.268756 153.268756-153.268756c12.491499-12.491499 32.729425-12.487406 45.220924 0.004093s12.493545 32.729425 0.002047 45.220924L557.225017 512 710.491727 665.266709z" fill="#ff4d4f" p-id="6408"></path></svg>`,h=e=>`<svg t="1695191942528" class="${e}message-icon ${e}message-info-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7731" id="mx_n_1695191942529"><path d="M512 1024A512 512 0 1 1 512 0a512 512 0 0 1 0 1024zM448 448v384h128V448H448z m0-256v128h128V192H448z" fill="#1677ff" p-id="7732"></path></svg>`,m=e=>`<svg viewBox="0 0 1024 1024" class="${e}message-icon ${e}message-loading-icon" focusable="false" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg>`,d={success:e=>i("success",e,r),warning:e=>i("warning",e,l),info:e=>i("info",e,h),error:e=>i("error",e,c),loading:e=>i("loading",e,m)},p=(...e)=>console.warn(...e),u=e=>"string"==typeof e,g=e=>"number"==typeof e&&!Number.isNaN(e),f=e=>"object"==typeof e&&!!e,w=e=>Array.isArray(e),v=e=>"function"==typeof e,C=e=>e instanceof HTMLElement||e instanceof HTMLCollection||e instanceof NodeList||"object"==typeof e&&null!==e&&"nodeType"in e&&1===e.nodeType,y=e=>Array.from(e),E=(e,s=document)=>s.querySelectorAll(e),N=(e,s=document)=>s.querySelector(e),x=e=>document.createElement(e),$=e=>document.createRange().createContextualFragment(e),B=e=>Array.isArray(e)?e:[e],b=(e,s)=>s.classList.add(...B(e)),z=(e,s)=>s.classList.remove(...B(e)),I=(e,s,t,n=!1)=>{e&&s&&t&&e.addEventListener(s,t,n)},A=(e,s,t,n=!1)=>{e&&s&&t&&e.removeEventListener(s,t,n)},M=e=>C(e)&&C(e.parentElement)&&v(e.parentElement.removeChild),L=e=>{e&&(M(e)?e.parentElement?.removeChild(e):e.remove())};var H=Object.freeze({__proto__:null,isString:u,isNumber:g,isObject:f,isArray:w,isFunction:v,isDom:C,toArray:y,hasOwn:(e,s)=>Object.prototype.hasOwnProperty.call(e,s),$$:E,$:N,create:x,createElement:$,wrapperArrayValue:B,addClass:b,hasClass:(e,s)=>s.classList.contains(e),removeClass:z,on:I,off:A,isRemoveNode:M,removeNode:L,warn:p});const O=e=>{let s={content:t.content,center:t.center,type:t.type,duration:t.duration,showClose:t.showClose,showTypeIcon:t.showTypeIcon,container:t.container,removeClassName:[...t.removeClassName||[]],startClassName:[...t.startClassName||[]]};u(e)?s.content=e:f(e)&&(s={...s,...e});const{duration:n,showClose:o,content:a,removeClassName:i,startClassName:r}=s;return g(n)&&!(n<=0)||o||(s.showClose=!0),u(a),w(i)||(s.removeClassName=[]),w(r)||(s.startClassName=[]),s.removeClassName=s.removeClassName.filter((e=>u(e))),s.startClassName=s.startClassName.filter((e=>u(e))),s},T=(e,s,t,n,o)=>{let a=s;if(s.length>0){const o=[];n.forEach((e=>{s.forEach((s=>{const n=e.includes(s)?`${t}message-${s}`:s;o.push(n)}))})),o.forEach((s=>b(s,e))),a=o}const i=()=>{e.removeEventListener("animationend",i),o?.(a)};I(e,"animationend",i)};class j{options;el;closeBtnEl;container;instances;closeHandler=null;animationFrameId=null;constructor(e){this.options=O(e),this.el=null,this.closeBtnEl=null,this.instances=null,this.container=(e=>{if(C(e))return e;if(u(e)){return N(e)||document.body}return document.body})(this.options.container),this.render()}destroy(){this.closeBtnEl&&this.closeHandler&&A(this.closeBtnEl,"click",this.closeHandler),this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.el&&this.close([this.el],0,!0),this.closeHandler=null}render(e){this.options={...this.options,...e};const{duration:s}=this.options,{element:t,closeBtnEl:n}=this.createMessage();this.animationAddNode(t,this.container),this.updateInstances(),s>0&&this.close([t],s),n&&(this.closeHandler=()=>this.close([t],0),I(n,"click",this.closeHandler))}updateInstances(){this.instances=E(".ew-message",this.container),this.instances&&this.instances.length>0&&this.setTop(this.instances)}createMessage(){const{type:e,center:s,content:t,showTypeIcon:n,typeIcon:o,showClose:a,closeIcon:r}=this.options,l=x("div"),c=["ew-message",`ew-message-${e}`];s&&c.push("ew-message-center"),b(c,l);const h=x("p");if(h.appendChild($(t)),n){const s=o||d[e||"info"]("ew-");l.appendChild($(s))}return l.appendChild(h),a&&(this.closeBtnEl=x("i"),b("ew-message-close",this.closeBtnEl),this.closeBtnEl.appendChild($(r||i("close","ew-",(e=>`<svg t="1690189203554" class="${e}message-close-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2272" fill="currentColor"><path d="M504.224 470.288l207.84-207.84a16 16 0 0 1 22.608 0l11.328 11.328a16 16 0 0 1 0 22.624l-207.84 207.824 207.84 207.84a16 16 0 0 1 0 22.608l-11.328 11.328a16 16 0 0 1-22.624 0l-207.824-207.84-207.84 207.84a16 16 0 0 1-22.608 0l-11.328-11.328a16 16 0 0 1 0-22.624l207.84-207.824-207.84-207.84a16 16 0 0 1 0-22.608l11.328-11.328a16 16 0 0 1 22.624 0l207.824 207.84z" p-id="2273"></path></svg>`)))),l.appendChild(this.closeBtnEl)),this.el=l,{element:l,closeBtnEl:this.closeBtnEl}}setTop(e){const s=y(e);if(0===s.length)return;const{top:t}=this.options,n=s[0].offsetHeight||50,o=()=>{s.forEach(((e,s)=>{const o=(e=>{if(g(Number(e)))return`${e}px`;if(u(e)){const s=/[px|%|rem|em|vh|vw|ex|rem|ch|vmin|vmax]/g;if(g(Number(e.replace(s,"")))&&e)return e}return 25})(t),a="string"==typeof o&&"25px"!==o?o:25*(s+1)+n*s+"px";e.style.top=a}))};"undefined"!=typeof jest?o():this.animationFrameId=requestAnimationFrame((()=>{o(),this.animationFrameId=null}))}animationAddNode(e,s){const{startClassName:t}=this.options;t&&t.length>0&&T(e,t,"ew-",[...o],(s=>{s.forEach((s=>z(s,e)))})),s.appendChild(e)}animationRemoveNode(e,s=!1){(()=>new Promise(((t,o)=>{try{const{removeClassName:o}=this.options;!s&&o.length>0?T(e,o,"ew-",[...n],(()=>{L(e),t()})):(L(e),t())}catch(e){o(e)}})))().then((()=>{this.el=null,this.closeBtnEl=null,this.updateInstances()})).catch((e=>{console.error("Error during animation removal:",e),this.el=null,this.closeBtnEl=null}))}close(e=[],s,t=!1){const n=Math.min(1e4,s),o=()=>{e.forEach((e=>{M(e)&&this.animationRemoveNode(e,t)}))};t?o():setTimeout(o,n)}}const{hasOwn:F,isObject:_,warn:S}=H,R=e=>new j(e);R.util=H;for(let e in s)R[e]=s=>{const t=O(s);return _(s)&&F(s,"type"),new j({...t,type:e})};export{R as default};